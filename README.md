# Blog Post Generator API

Генерация блог-постов с использованием новостного контекста из NewsAPI и языковой модели OpenAI.

## Описание

Сервис представляет собой FastAPI-приложение, которое выполняет следующие шаги:
1.  Принимает на вход тему для поста (например, "тренды в AI").
2.  Запрашивает свежие новости по этой теме из **NewsAPI.org**.
3.  Использует полученные новости как контекст для генерации контента через **OpenAI API**.
4.  Создает и возвращает:
    *   Привлекательный заголовок.
    *   SEO-оптимизированное meta description.
    *   Полноценный текст статьи со структурой и подзаголовками.

## Переменные окружения

Для работы сервиса необходимо задать следующие переменные окружения в файле `.env`:

### Обязательные
-   `OPENAI_API_KEY`: Ваш ключ доступа к OpenAI API.
-   `NEWSAPI_KEY`: Ваш ключ доступа к NewsAPI.org.

### Опциональные
-   `PORT`: Порт, на котором будет запускаться сервер (по умолчанию: `8000`).
-   `OPENAI_MODEL`: Модель OpenAI для генерации (по умолчанию: `gpt-4.1-nano`).
-   `OPENAI_MAX_OUTPUT_TOKENS`: Максимальное количество токенов в ответе модели (по умолчанию: `2000`).
-   `NEWS_LANGUAGE`: Язык новостей для поиска (по умолчанию: `en`).
-   `NEWS_PAGE_SIZE`: Количество статей, запрашиваемых из NewsAPI (по умолчанию: `5`).
-   `NEWS_DAYS_BACK`: Глубина поиска новостей в днях (по умолчанию: `7`).
-   `REQUEST_TIMEOUT_SEC`: Таймаут для внешних HTTP-запросов (по умолчанию: `15`).

## Установка

1.  Клонируйте репозиторий.
2. Создайте и активируйте виртуальное окружение:

   - **macOS / Linux:**
     ```bash
     python3 -m venv venv
     source venv/bin/activate
     ```

   - **Windows (CMD):**
     ```bash
     python -m venv venv
     venv\Scripts\activate.bat
     ```

   - **Windows (PowerShell):**
     ```bash
     python -m venv venv
     venv\Scripts\Activate.ps1
     ```

3.  Установите зависимости из файла `requirements.txt`:
    ```bash
    pip install -r requirements.txt
    ```

## Запуск

Для запуска приложения в режиме разработки с автоматической перезагрузкой выполните команду:

```bash
uvicorn app:app --reload
```

Сервер будет доступен по адресу `http://127.0.0.1:8000`.

## Эндпоинты

### Основные
-   `POST /generate-post`
    Основной эндпоинт для генерации поста. Принимает JSON с полем `topic`.

### Служебные
-   `GET /`
    Корневой эндпоинт. Возвращает сообщение о том, что сервис запущен.
-   `GET /health`
    Проверяет, загружена ли конфигурация (наличие `OPENAI_API_KEY` и `NEWSAPI_KEY`).
-   `GET /ready`
    Проверяет полную готовность сервиса к работе, включая непустые значения ключей API.
